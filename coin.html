<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Coin Objects | Pack YouR Code</title>
  <meta name="description" content="This book showcases a basic example of how to create an R package based on S3 classes." />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Coin Objects | Pack YouR Code" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/pack-your-code-logo.png" />
  <meta property="og:description" content="This book showcases a basic example of how to create an R package based on S3 classes." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Coin Objects | Pack YouR Code" />
  
  <meta name="twitter:description" content="This book showcases a basic example of how to create an R package based on S3 classes." />
  <meta name="twitter:image" content="images/pack-your-code-logo.png" />

<meta name="author" content="Gaston Sanchez" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="function.html"/>
<link rel="next" href="methods1.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Pack YouR Code</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#full-edition"><i class="fa fa-check"></i>Full Edition</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#preview-edition"><i class="fa fa-check"></i>Preview Edition</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#preface"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-this-book"><i class="fa fa-check"></i>About this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other Resources</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Motivation</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Let’s Toss a Coin</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#coin-object"><i class="fa fa-check"></i><b>1.1</b> Coin object</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#tossing-a-coin"><i class="fa fa-check"></i><b>1.2</b> Tossing a coin</a><ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#random-samples"><i class="fa fa-check"></i><b>1.2.1</b> Random Samples</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#the-random-seed"><i class="fa fa-check"></i><b>1.3</b> The Random Seed</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#sampling-with-different-probabilities"><i class="fa fa-check"></i><b>1.4</b> Sampling with different probabilities</a><ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#simulating-tossing-a-coin"><i class="fa fa-check"></i><b>1.4.1</b> Simulating tossing a coin</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="function.html"><a href="function.html"><i class="fa fa-check"></i><b>2</b> Tossing Function</a><ul>
<li class="chapter" data-level="2.1" data-path="function.html"><a href="function.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="function.html"><a href="function.html#a-toss-function"><i class="fa fa-check"></i><b>2.2</b> A <code>toss()</code> function</a></li>
<li class="chapter" data-level="2.3" data-path="function.html"><a href="function.html#documenting-functions"><i class="fa fa-check"></i><b>2.3</b> Documenting Functions</a></li>
<li class="chapter" data-level="2.4" data-path="function.html"><a href="function.html#roxygen-comments"><i class="fa fa-check"></i><b>2.4</b> Roxygen Comments</a><ul>
<li class="chapter" data-level="2.4.1" data-path="function.html"><a href="function.html#about-roxygen-comments"><i class="fa fa-check"></i><b>2.4.1</b> About Roxygen Comments</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Classes and Methods</b></span></li>
<li class="chapter" data-level="3" data-path="coin.html"><a href="coin.html"><i class="fa fa-check"></i><b>3</b> Coin Objects</a><ul>
<li class="chapter" data-level="3.1" data-path="coin.html"><a href="coin.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="coin.html"><a href="coin.html#objects-and-classes"><i class="fa fa-check"></i><b>3.2</b> Objects and Classes</a></li>
<li class="chapter" data-level="3.3" data-path="coin.html"><a href="coin.html#s3-classes"><i class="fa fa-check"></i><b>3.3</b> S3 Classes</a><ul>
<li class="chapter" data-level="3.3.1" data-path="coin.html"><a href="coin.html#making-an-object"><i class="fa fa-check"></i><b>3.3.1</b> Making an object</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="coin.html"><a href="coin.html#a-more-robust-coin-class"><i class="fa fa-check"></i><b>3.4</b> A more robust <code>"coin"</code> class</a></li>
<li class="chapter" data-level="3.5" data-path="coin.html"><a href="coin.html#improving-coin-objects"><i class="fa fa-check"></i><b>3.5</b> Improving <code>"coin"</code> objects</a><ul>
<li class="chapter" data-level="3.5.1" data-path="coin.html"><a href="coin.html#attributes"><i class="fa fa-check"></i><b>3.5.1</b> Attributes</a></li>
<li class="chapter" data-level="3.5.2" data-path="coin.html"><a href="coin.html#using-a-list"><i class="fa fa-check"></i><b>3.5.2</b> Using a list</a></li>
<li class="chapter" data-level="3.5.3" data-path="coin.html"><a href="coin.html#auxiliary-checker-function"><i class="fa fa-check"></i><b>3.5.3</b> Auxiliary Checker Function</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="coin.html"><a href="coin.html#print-method-for-coin-objects"><i class="fa fa-check"></i><b>3.6</b> Print Method for <code>"coin"</code> Objects</a></li>
<li class="chapter" data-level="3.7" data-path="coin.html"><a href="coin.html#extending-classes"><i class="fa fa-check"></i><b>3.7</b> Extending classes</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="methods1.html"><a href="methods1.html"><i class="fa fa-check"></i><b>4</b> Methods (part 1)</a><ul>
<li class="chapter" data-level="4.1" data-path="methods1.html"><a href="methods1.html#introduction-2"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="methods1.html"><a href="methods1.html#improving-toss"><i class="fa fa-check"></i><b>4.2</b> Improving <code>toss()</code></a></li>
<li class="chapter" data-level="4.3" data-path="methods1.html"><a href="methods1.html#generic-method-toss"><i class="fa fa-check"></i><b>4.3</b> Generic Method <code>toss</code></a></li>
</ul></li>
<li class="part"><span><b>III Package Structure</b></span></li>
<li class="part"><span><b>IV Packaging</b></span></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Pack YouR Code</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="coin" class="section level1">
<h1><span class="header-section-number">3</span> Coin Objects</h1>
<div id="introduction-1" class="section level2">
<h2><span class="header-section-number">3.1</span> Introduction</h2>
<p>In this chapter we describe how to create object classes in R. Specifically, we
will focus on the so-called <strong>S3 classes</strong> or S3 system. This is one of the
three types of Object Oriented (OO) systems available in R, and it is the most
common among R packages.</p>
</div>
<div id="objects-and-classes" class="section level2">
<h2><span class="header-section-number">3.2</span> Objects and Classes</h2>
<p>In the previous chapter we learned how to create a <code>toss()</code> function, and also
how to document it with roxygen comments. So far, we have the following code:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="coin.html#cb27-1"></a><span class="co">#&#39; Coin toss function</span></span>
<span id="cb27-2"><a href="coin.html#cb27-2"></a><span class="co">#&#39;</span></span>
<span id="cb27-3"><a href="coin.html#cb27-3"></a><span class="co">#&#39; Simulates tossing a coin a given number of times</span></span>
<span id="cb27-4"><a href="coin.html#cb27-4"></a><span class="co">#&#39;</span></span>
<span id="cb27-5"><a href="coin.html#cb27-5"></a><span class="co">#&#39; @param x coin object (a vector)</span></span>
<span id="cb27-6"><a href="coin.html#cb27-6"></a><span class="co">#&#39; @param times number of tosses</span></span>
<span id="cb27-7"><a href="coin.html#cb27-7"></a><span class="co">#&#39; @param prob vector of probabilities for each side of the coin</span></span>
<span id="cb27-8"><a href="coin.html#cb27-8"></a><span class="co">#&#39; @return vector of tosses</span></span>
<span id="cb27-9"><a href="coin.html#cb27-9"></a>toss &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">times =</span> <span class="dv">1</span>, <span class="dt">prob =</span> <span class="ot">NULL</span>) {</span>
<span id="cb27-10"><a href="coin.html#cb27-10"></a>  <span class="kw">sample</span>(x, <span class="dt">size =</span> times, <span class="dt">replace =</span> <span class="ot">TRUE</span>, <span class="dt">prob =</span> prob)</span>
<span id="cb27-11"><a href="coin.html#cb27-11"></a>}</span></code></pre></div>
<p>We can invoke <code>toss()</code> to generate a first series of five tosses, and then
compute the total proportion of heads:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="coin.html#cb28-1"></a><span class="co"># random seed</span></span>
<span id="cb28-2"><a href="coin.html#cb28-2"></a><span class="kw">set.seed</span>(<span class="dv">534</span>)</span>
<span id="cb28-3"><a href="coin.html#cb28-3"></a></span>
<span id="cb28-4"><a href="coin.html#cb28-4"></a><span class="co"># five tosses</span></span>
<span id="cb28-5"><a href="coin.html#cb28-5"></a>five &lt;-<span class="st"> </span><span class="kw">toss</span>(coin, <span class="dt">times =</span> <span class="dv">5</span>)</span>
<span id="cb28-6"><a href="coin.html#cb28-6"></a>five</span>
<span id="cb28-7"><a href="coin.html#cb28-7"></a><span class="co">#&gt; [1] &quot;tails&quot; &quot;tails&quot; &quot;tails&quot; &quot;heads&quot; &quot;heads&quot;</span></span>
<span id="cb28-8"><a href="coin.html#cb28-8"></a></span>
<span id="cb28-9"><a href="coin.html#cb28-9"></a><span class="co"># proportion of heads in five</span></span>
<span id="cb28-10"><a href="coin.html#cb28-10"></a><span class="kw">sum</span>(five <span class="op">==</span><span class="st"> &quot;heads&quot;</span>) <span class="op">/</span><span class="st"> </span><span class="kw">length</span>(five)</span>
<span id="cb28-11"><a href="coin.html#cb28-11"></a><span class="co">#&gt; [1] 0.4</span></span></code></pre></div>
<p>We can also get a second series of tosses, but this time involving tossing a
coin six times. Similarly, we compute the total proportion of heads:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="coin.html#cb29-1"></a><span class="co"># six tosses</span></span>
<span id="cb29-2"><a href="coin.html#cb29-2"></a>six &lt;-<span class="st"> </span><span class="kw">toss</span>(coin, <span class="dt">times =</span> <span class="dv">6</span>)</span>
<span id="cb29-3"><a href="coin.html#cb29-3"></a>six</span>
<span id="cb29-4"><a href="coin.html#cb29-4"></a><span class="co">#&gt; [1] &quot;heads&quot; &quot;heads&quot; &quot;heads&quot; &quot;tails&quot; &quot;heads&quot; &quot;tails&quot;</span></span>
<span id="cb29-5"><a href="coin.html#cb29-5"></a></span>
<span id="cb29-6"><a href="coin.html#cb29-6"></a><span class="co"># prop of heads in six</span></span>
<span id="cb29-7"><a href="coin.html#cb29-7"></a><span class="kw">sum</span>(six <span class="op">==</span><span class="st"> &quot;heads&quot;</span>) <span class="op">/</span><span class="st"> </span><span class="kw">length</span>(five)</span>
<span id="cb29-8"><a href="coin.html#cb29-8"></a><span class="co">#&gt; [1] 0.8</span></span></code></pre></div>
<p>The above code works … except that there is an error; the number of heads in
<code>six</code> is being divided by 5 instead of 6. R hasn’t detected this error: it
doesn’t know that the division has to be done using <code>length(six)</code>.</p>
<p>Wouldn’t it be prefarable to have some mechanism that prevented this type of
error from happening? Bugs will always be part of any programming activity, but
it is better to minimize certain types of errors like the one above.</p>
</div>
<div id="s3-classes" class="section level2">
<h2><span class="header-section-number">3.3</span> S3 Classes</h2>
<p>R has two (plus one) object oriented systems, so it can be a bit intimidatin
gwhen you read and learn about them for the first time. The goal of this
section is not to make you an expert in all R’s OO systems, but to help you
become familiar with the so-called “S3 class”.</p>
<p><strong>S3</strong> implements a style of object oriented programming called
<em>generic-function OO</em>. S3 uses a special type of function called a <em>generic</em>
function that decides which method to call. Keep in mind that S3 is a very
casual system: it does not really have a formal definition of classes.</p>
<p>S3 classes are widely-used, in particular for statistical models in the
<code>"stats"</code> package. S3 classes are very informal in that there is not a formal
definition for an S3 class. Usually, S3 objects are built on top of lists, or
atomic vectors with attributes. But you can also turn functions into S3 objects.</p>
<p>Note that in more formal OOP languages, all functions are associated with a
class, while in R, only some are.</p>
<div id="making-an-object" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Making an object</h3>
<p>To make an object an instance of a class, you just take an existing base object
and set a <code>"class"</code> attribute for it. You can do that during creation of the
object with the function <code>structure()</code> and its <code>class</code> argument. For example,
we can create an object of class <code>"coin"</code> like so:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="coin.html#cb30-1"></a><span class="co"># object coin via structure()</span></span>
<span id="cb30-2"><a href="coin.html#cb30-2"></a>coin1 &lt;-<span class="st"> </span><span class="kw">structure</span>(<span class="kw">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>), <span class="dt">class =</span> <span class="st">&quot;coin&quot;</span>) </span>
<span id="cb30-3"><a href="coin.html#cb30-3"></a>coin1</span>
<span id="cb30-4"><a href="coin.html#cb30-4"></a><span class="co">#&gt; [1] &quot;heads&quot; &quot;tails&quot;</span></span>
<span id="cb30-5"><a href="coin.html#cb30-5"></a><span class="co">#&gt; attr(,&quot;class&quot;)</span></span>
<span id="cb30-6"><a href="coin.html#cb30-6"></a><span class="co">#&gt; [1] &quot;coin&quot;</span></span></code></pre></div>
<p>You can also create an object first, and then specify its class with the
homonym function <code>class()</code>:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="coin.html#cb31-1"></a><span class="co"># object coin via class()</span></span>
<span id="cb31-2"><a href="coin.html#cb31-2"></a>coin2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>)</span>
<span id="cb31-3"><a href="coin.html#cb31-3"></a><span class="kw">class</span>(coin2) &lt;-<span class="st"> &quot;coin&quot;</span></span>
<span id="cb31-4"><a href="coin.html#cb31-4"></a>coin2</span>
<span id="cb31-5"><a href="coin.html#cb31-5"></a><span class="co">#&gt; [1] &quot;heads&quot; &quot;tails&quot;</span></span>
<span id="cb31-6"><a href="coin.html#cb31-6"></a><span class="co">#&gt; attr(,&quot;class&quot;)</span></span>
<span id="cb31-7"><a href="coin.html#cb31-7"></a><span class="co">#&gt; [1] &quot;coin&quot;</span></span></code></pre></div>
<p>As any object in R, you can inspect the class of objects <code>coin1</code> and <code>coin2</code>
with the <code>class()</code> function:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="coin.html#cb32-1"></a><span class="kw">class</span>(coin1)</span>
<span id="cb32-2"><a href="coin.html#cb32-2"></a><span class="co">#&gt; [1] &quot;coin&quot;</span></span>
<span id="cb32-3"><a href="coin.html#cb32-3"></a></span>
<span id="cb32-4"><a href="coin.html#cb32-4"></a><span class="kw">class</span>(coin2)</span>
<span id="cb32-5"><a href="coin.html#cb32-5"></a><span class="co">#&gt; [1] &quot;coin&quot;</span></span></code></pre></div>
<p>You can also determine if an object inherits from a specific class using
<code>inherits()</code></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="coin.html#cb33-1"></a><span class="kw">inherits</span>(coin2, <span class="st">&quot;coin&quot;</span>)</span>
<span id="cb33-2"><a href="coin.html#cb33-2"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>Having a <code>"coin"</code> object, we can pass it to the <code>toss()</code> function to simulate
flipping the coin:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="coin.html#cb34-1"></a><span class="kw">toss</span>(coin1, <span class="dt">times =</span> <span class="dv">5</span>)</span>
<span id="cb34-2"><a href="coin.html#cb34-2"></a><span class="co">#&gt; [1] &quot;heads&quot; &quot;heads&quot; &quot;heads&quot; &quot;tails&quot; &quot;tails&quot;</span></span></code></pre></div>
</div>
</div>
<div id="a-more-robust-coin-class" class="section level2">
<h2><span class="header-section-number">3.4</span> A more robust <code>"coin"</code> class</h2>
<p>Let’s review our class <code>"coin"</code>. The way we defined a coin object was like this:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="coin.html#cb35-1"></a><span class="co"># object coin</span></span>
<span id="cb35-2"><a href="coin.html#cb35-2"></a>coin1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>)</span>
<span id="cb35-3"><a href="coin.html#cb35-3"></a><span class="kw">class</span>(coin1) &lt;-<span class="st"> &quot;coin&quot;</span> </span></code></pre></div>
<p>While this definition is good to illustrate the concept of an object, its class,
and how to define generic methods, it is a very loose-defined class. One could
create a <code>"coin"</code> out of <code>c('tic', 'tac', 'toe')</code>, and then use <code>toss()</code> on it:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="coin.html#cb36-1"></a>ttt &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;tic&#39;</span>, <span class="st">&#39;tac&#39;</span>, <span class="st">&#39;toe&#39;</span>)</span>
<span id="cb36-2"><a href="coin.html#cb36-2"></a><span class="kw">class</span>(ttt) &lt;-<span class="st"> &quot;coin&quot;</span></span>
<span id="cb36-3"><a href="coin.html#cb36-3"></a></span>
<span id="cb36-4"><a href="coin.html#cb36-4"></a><span class="kw">toss</span>(ttt)</span>
<span id="cb36-5"><a href="coin.html#cb36-5"></a><span class="co">#&gt; [1] &quot;tic&quot;</span></span></code></pre></div>
<p>We need a more formal definition of a coin object. For instance, it makes more
sense to require that a coin should only have two sides. In this way, a vector
like <code>ttt</code> would not be a valid coin.</p>
<p>For convenience purposes, we can define a <strong>class constructor</strong> function to
initialize a <code>"coin"</code> object:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="coin.html#cb37-1"></a><span class="co"># constructor function (version 1)</span></span>
<span id="cb37-2"><a href="coin.html#cb37-2"></a>coin &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">object =</span> <span class="kw">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>)) {</span>
<span id="cb37-3"><a href="coin.html#cb37-3"></a>  <span class="kw">class</span>(object) &lt;-<span class="st"> &quot;coin&quot;</span></span>
<span id="cb37-4"><a href="coin.html#cb37-4"></a>  object</span>
<span id="cb37-5"><a href="coin.html#cb37-5"></a>}</span>
<span id="cb37-6"><a href="coin.html#cb37-6"></a></span>
<span id="cb37-7"><a href="coin.html#cb37-7"></a><span class="co"># default coin</span></span>
<span id="cb37-8"><a href="coin.html#cb37-8"></a><span class="kw">coin</span>()</span>
<span id="cb37-9"><a href="coin.html#cb37-9"></a><span class="co">#&gt; [1] &quot;heads&quot; &quot;tails&quot;</span></span>
<span id="cb37-10"><a href="coin.html#cb37-10"></a><span class="co">#&gt; attr(,&quot;class&quot;)</span></span>
<span id="cb37-11"><a href="coin.html#cb37-11"></a><span class="co">#&gt; [1] &quot;coin&quot;</span></span>
<span id="cb37-12"><a href="coin.html#cb37-12"></a></span>
<span id="cb37-13"><a href="coin.html#cb37-13"></a><span class="co"># another coin</span></span>
<span id="cb37-14"><a href="coin.html#cb37-14"></a><span class="kw">coin</span>(<span class="kw">c</span>(<span class="st">&quot;h&quot;</span>, <span class="st">&quot;t&quot;</span>))</span>
<span id="cb37-15"><a href="coin.html#cb37-15"></a><span class="co">#&gt; [1] &quot;h&quot; &quot;t&quot;</span></span>
<span id="cb37-16"><a href="coin.html#cb37-16"></a><span class="co">#&gt; attr(,&quot;class&quot;)</span></span>
<span id="cb37-17"><a href="coin.html#cb37-17"></a><span class="co">#&gt; [1] &quot;coin&quot;</span></span></code></pre></div>
<p>Think of this type of function as an auxiliary function that you can use to
generate a default object of class <code>coin</code>.</p>
</div>
<div id="improving-coin-objects" class="section level2">
<h2><span class="header-section-number">3.5</span> Improving <code>"coin"</code> objects</h2>
<p>To implement the requirement that a coin must have two sides, we can add an
<code>if()</code> condition to the constructor function in order to check for the length
of the input vector. If the length of the input object is different from two,
then we stop execution; otherwise we proceed with the creation of a <code>coin</code>
object.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="coin.html#cb38-1"></a><span class="co"># constructor function (version 2)</span></span>
<span id="cb38-2"><a href="coin.html#cb38-2"></a>coin &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">object =</span> <span class="kw">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>)) {</span>
<span id="cb38-3"><a href="coin.html#cb38-3"></a>  <span class="cf">if</span> (<span class="kw">length</span>(object) <span class="op">!=</span><span class="st"> </span><span class="dv">2</span>) {</span>
<span id="cb38-4"><a href="coin.html#cb38-4"></a>    <span class="kw">stop</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&#39;object&#39; must be of length 2&quot;</span>)</span>
<span id="cb38-5"><a href="coin.html#cb38-5"></a>  }</span>
<span id="cb38-6"><a href="coin.html#cb38-6"></a>  <span class="kw">class</span>(object) &lt;-<span class="st"> &quot;coin&quot;</span></span>
<span id="cb38-7"><a href="coin.html#cb38-7"></a>  object</span>
<span id="cb38-8"><a href="coin.html#cb38-8"></a>}</span></code></pre></div>
<p>Let’s try our modified constructor function <code>coin()</code> to create a virtual version
of the US penny like the one in the image below:</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-32"></span>
<img src="images/penny.jpg" alt="Example of a US penny (www.usacoinbook.com)" width="50%" />
<p class="caption">
Figure 3.1: Example of a US penny (www.usacoinbook.com)
</p>
</div>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="coin.html#cb39-1"></a><span class="co"># US penny</span></span>
<span id="cb39-2"><a href="coin.html#cb39-2"></a>penny &lt;-<span class="st"> </span><span class="kw">coin</span>(<span class="kw">c</span>(<span class="st">&quot;lincoln&quot;</span>, <span class="st">&quot;shield&quot;</span>))</span>
<span id="cb39-3"><a href="coin.html#cb39-3"></a>penny</span>
<span id="cb39-4"><a href="coin.html#cb39-4"></a><span class="co">#&gt; [1] &quot;lincoln&quot; &quot;shield&quot; </span></span>
<span id="cb39-5"><a href="coin.html#cb39-5"></a><span class="co">#&gt; attr(,&quot;class&quot;)</span></span>
<span id="cb39-6"><a href="coin.html#cb39-6"></a><span class="co">#&gt; [1] &quot;coin&quot;</span></span></code></pre></div>
<p>Now let’s try <code>coin()</code> with an invalid input vector. In this case, the constructor function will <code>stop()</code> execution with an error message because the input argument has more than 2 elements.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="coin.html#cb40-1"></a><span class="co"># invalid coin</span></span>
<span id="cb40-2"><a href="coin.html#cb40-2"></a>ttt &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;tic&#39;</span>, <span class="st">&#39;tac&#39;</span>, <span class="st">&#39;toe&#39;</span>)</span>
<span id="cb40-3"><a href="coin.html#cb40-3"></a><span class="kw">coin</span>(ttt)</span>
<span id="cb40-4"><a href="coin.html#cb40-4"></a><span class="co">#&gt; Error in coin(ttt): </span></span>
<span id="cb40-5"><a href="coin.html#cb40-5"></a><span class="co">#&gt; &#39;object&#39; must be of length 2</span></span></code></pre></div>
<div id="attributes" class="section level3">
<h3><span class="header-section-number">3.5.1</span> Attributes</h3>
<p>Notice how everytime you print the name of a <code>"coin"</code> object, its class is
displayed in the form of <code>attr(,"class")</code>.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="coin.html#cb41-1"></a>penny</span>
<span id="cb41-2"><a href="coin.html#cb41-2"></a><span class="co">#&gt; [1] &quot;lincoln&quot; &quot;shield&quot; </span></span>
<span id="cb41-3"><a href="coin.html#cb41-3"></a><span class="co">#&gt; attr(,&quot;class&quot;)</span></span>
<span id="cb41-4"><a href="coin.html#cb41-4"></a><span class="co">#&gt; [1] &quot;coin&quot;</span></span></code></pre></div>
<p>Interestingly, an R object can have multiple attributes. Right now our <code>coin</code>
objects have just one attribute—its class. But we can add more attributes if
we want to. For example, we could add an attribute <code>prob</code>. Let’s see why and how.</p>
<p>Recall that the <code>toss()</code> function simulates flips using <code>sample()</code>. Also, recall
that one of the arguments of <code>sample()</code> is <code>prob</code> which lets you specify
probabilities for each of the elements in the input vector. In order to take
advantage of <code>sample()</code>’s argument <code>prob</code>, and being able to create <em>loaded</em>
(i.e. biased) coins, we can add an attribute to our coin object to specify
probabilities for each of its sides.</p>
<p>In other words, in addition to the <code>class</code> attribute of a coin, the idea is to
assign another attribute for the probability values. We can do this by adding a
<code>prob</code> argument to the constructor function, and then pass it as an attribute
of the coin object inside the class-constructor function. Here’s how:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="coin.html#cb42-1"></a><span class="co"># constructor function (version 3)</span></span>
<span id="cb42-2"><a href="coin.html#cb42-2"></a>coin &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">object=</span><span class="kw">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>), <span class="dt">prob=</span><span class="kw">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>)) {</span>
<span id="cb42-3"><a href="coin.html#cb42-3"></a>  <span class="cf">if</span> (<span class="kw">length</span>(object) <span class="op">!=</span><span class="st"> </span><span class="dv">2</span>) {</span>
<span id="cb42-4"><a href="coin.html#cb42-4"></a>    <span class="kw">stop</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&#39;object&#39; must be of length 2&quot;</span>)</span>
<span id="cb42-5"><a href="coin.html#cb42-5"></a>  }</span>
<span id="cb42-6"><a href="coin.html#cb42-6"></a>  <span class="kw">attr</span>(object, <span class="st">&quot;prob&quot;</span>) &lt;-<span class="st"> </span>prob</span>
<span id="cb42-7"><a href="coin.html#cb42-7"></a>  <span class="kw">class</span>(object) &lt;-<span class="st"> &quot;coin&quot;</span></span>
<span id="cb42-8"><a href="coin.html#cb42-8"></a>  <span class="kw">return</span>(object)</span>
<span id="cb42-9"><a href="coin.html#cb42-9"></a>}</span>
<span id="cb42-10"><a href="coin.html#cb42-10"></a></span>
<span id="cb42-11"><a href="coin.html#cb42-11"></a><span class="kw">coin</span>()</span>
<span id="cb42-12"><a href="coin.html#cb42-12"></a><span class="co">#&gt; [1] &quot;heads&quot; &quot;tails&quot;</span></span>
<span id="cb42-13"><a href="coin.html#cb42-13"></a><span class="co">#&gt; attr(,&quot;prob&quot;)</span></span>
<span id="cb42-14"><a href="coin.html#cb42-14"></a><span class="co">#&gt; [1] 0.5 0.5</span></span>
<span id="cb42-15"><a href="coin.html#cb42-15"></a><span class="co">#&gt; attr(,&quot;class&quot;)</span></span>
<span id="cb42-16"><a href="coin.html#cb42-16"></a><span class="co">#&gt; [1] &quot;coin&quot;</span></span></code></pre></div>
<p>In the previous code, the <code>prob</code> argument takes a vector of probabilities for
each element in <code>object</code>. This vector is passed to <code>object</code> via the function
<code>attr()</code> inside the body of <code>coin()</code>. Notice the use of a default argument
<code>prob = c(0.5, 0.5)</code>, that is, a <em>fair</em> coin by default.</p>
</div>
<div id="using-a-list" class="section level3">
<h3><span class="header-section-number">3.5.2</span> Using a list</h3>
<p>Another way to implement a constructor function <code>coin()</code> that returns an object
containing values for both the <em>sides</em> and the <em>probabilities</em>, is to use an R
list. Here’s the code for this option:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="coin.html#cb43-1"></a><span class="co"># constructor function (version 4)</span></span>
<span id="cb43-2"><a href="coin.html#cb43-2"></a>coin &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">sides=</span><span class="kw">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>), <span class="dt">prob=</span><span class="kw">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>)) {</span>
<span id="cb43-3"><a href="coin.html#cb43-3"></a>  <span class="cf">if</span> (<span class="kw">length</span>(sides) <span class="op">!=</span><span class="st"> </span><span class="dv">2</span>) {</span>
<span id="cb43-4"><a href="coin.html#cb43-4"></a>    <span class="kw">stop</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&#39;sides&#39; must be of length 2&quot;</span>)</span>
<span id="cb43-5"><a href="coin.html#cb43-5"></a>  }</span>
<span id="cb43-6"><a href="coin.html#cb43-6"></a>  res &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">sides =</span> sides, <span class="dt">prob =</span> prob)</span>
<span id="cb43-7"><a href="coin.html#cb43-7"></a>  <span class="kw">class</span>(res) &lt;-<span class="st"> &quot;coin&quot;</span></span>
<span id="cb43-8"><a href="coin.html#cb43-8"></a>  <span class="kw">return</span>(res)</span>
<span id="cb43-9"><a href="coin.html#cb43-9"></a>}</span>
<span id="cb43-10"><a href="coin.html#cb43-10"></a></span>
<span id="cb43-11"><a href="coin.html#cb43-11"></a><span class="kw">coin</span>()</span>
<span id="cb43-12"><a href="coin.html#cb43-12"></a><span class="co">#&gt; $sides</span></span>
<span id="cb43-13"><a href="coin.html#cb43-13"></a><span class="co">#&gt; [1] &quot;heads&quot; &quot;tails&quot;</span></span>
<span id="cb43-14"><a href="coin.html#cb43-14"></a><span class="co">#&gt; </span></span>
<span id="cb43-15"><a href="coin.html#cb43-15"></a><span class="co">#&gt; $prob</span></span>
<span id="cb43-16"><a href="coin.html#cb43-16"></a><span class="co">#&gt; [1] 0.5 0.5</span></span>
<span id="cb43-17"><a href="coin.html#cb43-17"></a><span class="co">#&gt; </span></span>
<span id="cb43-18"><a href="coin.html#cb43-18"></a><span class="co">#&gt; attr(,&quot;class&quot;)</span></span>
<span id="cb43-19"><a href="coin.html#cb43-19"></a><span class="co">#&gt; [1] &quot;coin&quot;</span></span></code></pre></div>
<p>Personally, I prefer this latter option because it allows you to create more
complex objects as an R list. The important detail is to assign the name of a
class to the created object with the function <code>class()</code>.</p>
</div>
<div id="auxiliary-checker-function" class="section level3">
<h3><span class="header-section-number">3.5.3</span> Auxiliary Checker Function</h3>
<p>Once again, while constructing an object of class <code>"coin"</code> we need to check its
validity which involves checking for the validity of <code>prob</code>. We basically need
to check that <code>prob</code> and its elements meet the following requirements:</p>
<ul>
<li><p>must be numeric and of length 2</p></li>
<li><p>probability values must be between 0 and 1</p></li>
<li><p>the sum of these values must add up to 1</p></li>
</ul>
<p>Here is one possible function to verify the aspects of <code>prob</code> listed above:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="coin.html#cb44-1"></a>check_prob &lt;-<span class="st"> </span><span class="cf">function</span>(prob) {</span>
<span id="cb44-2"><a href="coin.html#cb44-2"></a>  <span class="cf">if</span> (<span class="kw">length</span>(prob) <span class="op">!=</span><span class="st"> </span><span class="dv">2</span> <span class="op">|</span><span class="st"> </span><span class="op">!</span><span class="kw">is.numeric</span>(prob)) {</span>
<span id="cb44-3"><a href="coin.html#cb44-3"></a>    <span class="kw">stop</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&#39;prob&#39; must be a numeric vector of length 2&quot;</span>)</span>
<span id="cb44-4"><a href="coin.html#cb44-4"></a>  }</span>
<span id="cb44-5"><a href="coin.html#cb44-5"></a>  <span class="cf">if</span> (<span class="kw">any</span>(prob <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">|</span><span class="st"> </span><span class="kw">any</span>(prob <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)) {</span>
<span id="cb44-6"><a href="coin.html#cb44-6"></a>    <span class="kw">stop</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&#39;prob&#39; values must be between 0 and 1&quot;</span>)</span>
<span id="cb44-7"><a href="coin.html#cb44-7"></a>  }</span>
<span id="cb44-8"><a href="coin.html#cb44-8"></a>  <span class="cf">if</span> (<span class="kw">sum</span>(prob) <span class="op">!=</span><span class="st"> </span><span class="dv">1</span>) {</span>
<span id="cb44-9"><a href="coin.html#cb44-9"></a>    <span class="kw">stop</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">elements in &#39;prob&#39; must add up to 1&quot;</span>)</span>
<span id="cb44-10"><a href="coin.html#cb44-10"></a>  }</span>
<span id="cb44-11"><a href="coin.html#cb44-11"></a>  <span class="ot">TRUE</span></span>
<span id="cb44-12"><a href="coin.html#cb44-12"></a>}</span></code></pre></div>
<p>Note that I’m adding a <code>TRUE</code> statement at the end of the function. This is just
an auxiliary value to determine whether the function returns a valid <code>prob</code>.</p>
<p>Now let’s test <code>check_prob</code> with <em>valid</em> and <em>invalid</em> values:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="coin.html#cb45-1"></a><span class="co"># Valid -----------------------</span></span>
<span id="cb45-2"><a href="coin.html#cb45-2"></a><span class="kw">check_prob</span>(<span class="kw">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>))</span>
<span id="cb45-3"><a href="coin.html#cb45-3"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb45-4"><a href="coin.html#cb45-4"></a></span>
<span id="cb45-5"><a href="coin.html#cb45-5"></a><span class="kw">check_prob</span>(<span class="kw">c</span>(<span class="fl">0.1</span>, <span class="fl">0.9</span>))</span>
<span id="cb45-6"><a href="coin.html#cb45-6"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb45-7"><a href="coin.html#cb45-7"></a></span>
<span id="cb45-8"><a href="coin.html#cb45-8"></a><span class="kw">check_prob</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">3</span>, <span class="dv">2</span><span class="op">/</span><span class="dv">3</span>))</span>
<span id="cb45-9"><a href="coin.html#cb45-9"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb45-10"><a href="coin.html#cb45-10"></a></span>
<span id="cb45-11"><a href="coin.html#cb45-11"></a><span class="kw">check_prob</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">3</span>, <span class="dv">6</span><span class="op">/</span><span class="dv">9</span>))</span>
<span id="cb45-12"><a href="coin.html#cb45-12"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="coin.html#cb46-1"></a><span class="co"># Invalid -----------------------</span></span>
<span id="cb46-2"><a href="coin.html#cb46-2"></a><span class="co"># bad length</span></span>
<span id="cb46-3"><a href="coin.html#cb46-3"></a><span class="kw">check_prob</span>(<span class="dv">1</span>)</span>
<span id="cb46-4"><a href="coin.html#cb46-4"></a><span class="co">#&gt; Error in check_prob(1): </span></span>
<span id="cb46-5"><a href="coin.html#cb46-5"></a><span class="co">#&gt; &#39;prob&#39; must be a numeric vector of length 2</span></span>
<span id="cb46-6"><a href="coin.html#cb46-6"></a></span>
<span id="cb46-7"><a href="coin.html#cb46-7"></a><span class="co"># bad length</span></span>
<span id="cb46-8"><a href="coin.html#cb46-8"></a><span class="kw">check_prob</span>(<span class="kw">c</span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>))</span>
<span id="cb46-9"><a href="coin.html#cb46-9"></a><span class="co">#&gt; Error in check_prob(c(0.1, 0.2, 0.3)): </span></span>
<span id="cb46-10"><a href="coin.html#cb46-10"></a><span class="co">#&gt; &#39;prob&#39; must be a numeric vector of length 2</span></span>
<span id="cb46-11"><a href="coin.html#cb46-11"></a></span>
<span id="cb46-12"><a href="coin.html#cb46-12"></a><span class="co"># negative probability</span></span>
<span id="cb46-13"><a href="coin.html#cb46-13"></a><span class="kw">check_prob</span>(<span class="kw">c</span>(<span class="op">-</span><span class="fl">0.2</span>, <span class="fl">0.8</span>))</span>
<span id="cb46-14"><a href="coin.html#cb46-14"></a><span class="co">#&gt; Error in check_prob(c(-0.2, 0.8)): </span></span>
<span id="cb46-15"><a href="coin.html#cb46-15"></a><span class="co">#&gt; &#39;prob&#39; values must be between 0 and 1</span></span>
<span id="cb46-16"><a href="coin.html#cb46-16"></a></span>
<span id="cb46-17"><a href="coin.html#cb46-17"></a><span class="co"># what should we do in this case?</span></span>
<span id="cb46-18"><a href="coin.html#cb46-18"></a><span class="kw">check_prob</span>(<span class="kw">c</span>(<span class="fl">0.33</span>, <span class="fl">0.66</span>))     </span>
<span id="cb46-19"><a href="coin.html#cb46-19"></a><span class="co">#&gt; Error in check_prob(c(0.33, 0.66)): </span></span>
<span id="cb46-20"><a href="coin.html#cb46-20"></a><span class="co">#&gt; elements in &#39;prob&#39; must add up to 1</span></span></code></pre></div>
<p>With the definition of the checker function <code>check_prob()</code>, we keep refining
our constructor function <code>coin()</code>:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="coin.html#cb47-1"></a><span class="co"># constructor function (version 5)</span></span>
<span id="cb47-2"><a href="coin.html#cb47-2"></a>coin &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">sides=</span><span class="kw">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>), <span class="dt">prob=</span><span class="kw">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>)) {</span>
<span id="cb47-3"><a href="coin.html#cb47-3"></a>  <span class="cf">if</span> (<span class="kw">length</span>(sides) <span class="op">!=</span><span class="st"> </span><span class="dv">2</span>) {</span>
<span id="cb47-4"><a href="coin.html#cb47-4"></a>    <span class="kw">stop</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&#39;sides&#39; must be of length 2&quot;</span>)</span>
<span id="cb47-5"><a href="coin.html#cb47-5"></a>  }</span>
<span id="cb47-6"><a href="coin.html#cb47-6"></a>  <span class="kw">check_prob</span>(prob)</span>
<span id="cb47-7"><a href="coin.html#cb47-7"></a>  res &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">sides =</span> sides, <span class="dt">prob =</span> prob)</span>
<span id="cb47-8"><a href="coin.html#cb47-8"></a>  <span class="kw">class</span>(res) &lt;-<span class="st"> &quot;coin&quot;</span></span>
<span id="cb47-9"><a href="coin.html#cb47-9"></a>  <span class="kw">return</span>(res)</span>
<span id="cb47-10"><a href="coin.html#cb47-10"></a>}</span>
<span id="cb47-11"><a href="coin.html#cb47-11"></a></span>
<span id="cb47-12"><a href="coin.html#cb47-12"></a>coin1 &lt;-<span class="st"> </span><span class="kw">coin</span>()</span>
<span id="cb47-13"><a href="coin.html#cb47-13"></a>coin1</span>
<span id="cb47-14"><a href="coin.html#cb47-14"></a><span class="co">#&gt; $sides</span></span>
<span id="cb47-15"><a href="coin.html#cb47-15"></a><span class="co">#&gt; [1] &quot;heads&quot; &quot;tails&quot;</span></span>
<span id="cb47-16"><a href="coin.html#cb47-16"></a><span class="co">#&gt; </span></span>
<span id="cb47-17"><a href="coin.html#cb47-17"></a><span class="co">#&gt; $prob</span></span>
<span id="cb47-18"><a href="coin.html#cb47-18"></a><span class="co">#&gt; [1] 0.5 0.5</span></span>
<span id="cb47-19"><a href="coin.html#cb47-19"></a><span class="co">#&gt; </span></span>
<span id="cb47-20"><a href="coin.html#cb47-20"></a><span class="co">#&gt; attr(,&quot;class&quot;)</span></span>
<span id="cb47-21"><a href="coin.html#cb47-21"></a><span class="co">#&gt; [1] &quot;coin&quot;</span></span></code></pre></div>
</div>
</div>
<div id="print-method-for-coin-objects" class="section level2">
<h2><span class="header-section-number">3.6</span> Print Method for <code>"coin"</code> Objects</h2>
<p>Every time you type in the name of an object <code>"coin"</code>, like our <code>penny</code> example,
the output is displayed in a default, “quick and dirty”, way. In this case R
simply displays the values associated to the sides and their probabilities like
any other list:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="coin.html#cb48-1"></a><span class="co"># US penny</span></span>
<span id="cb48-2"><a href="coin.html#cb48-2"></a>penny &lt;-<span class="st"> </span><span class="kw">coin</span>(<span class="kw">c</span>(<span class="st">&quot;lincoln&quot;</span>, <span class="st">&quot;shield&quot;</span>))</span>
<span id="cb48-3"><a href="coin.html#cb48-3"></a>penny</span>
<span id="cb48-4"><a href="coin.html#cb48-4"></a><span class="co">#&gt; $sides</span></span>
<span id="cb48-5"><a href="coin.html#cb48-5"></a><span class="co">#&gt; [1] &quot;lincoln&quot; &quot;shield&quot; </span></span>
<span id="cb48-6"><a href="coin.html#cb48-6"></a><span class="co">#&gt; </span></span>
<span id="cb48-7"><a href="coin.html#cb48-7"></a><span class="co">#&gt; $prob</span></span>
<span id="cb48-8"><a href="coin.html#cb48-8"></a><span class="co">#&gt; [1] 0.5 0.5</span></span>
<span id="cb48-9"><a href="coin.html#cb48-9"></a><span class="co">#&gt; </span></span>
<span id="cb48-10"><a href="coin.html#cb48-10"></a><span class="co">#&gt; attr(,&quot;class&quot;)</span></span>
<span id="cb48-11"><a href="coin.html#cb48-11"></a><span class="co">#&gt; [1] &quot;coin&quot;</span></span></code></pre></div>
<p>Sometimes the default displayed output is all you need. However, there are
occasions in which you need to customize the amount and format of information
displayed on the screen when you type in the name of an object.</p>
<p>Instead of keeping the default printed values, it would be nice to print <code>penny</code>
and see some <em>cleaner</em> output, perhaps something like this:</p>
<pre><code>object &quot;coin&quot;

        side  prob
1  &quot;lincoln&quot;   0.5
2   &quot;shield&quot;   0.5</code></pre>
<p>How can we obtain such type of printed output? The answer involves writing a
<code>print</code> method for objects of class <code>"coin"</code>. Because <code>print()</code> is actually a
generic function, what you need to do is to create a a specific print <em>flavor</em>
for class <code>"coin"</code>. Basically, you define a <code>print.coin()</code> function, and then
include commands to print information in the desired way:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="coin.html#cb50-1"></a><span class="co"># print method for objects of class &quot;coin&quot;</span></span>
<span id="cb50-2"><a href="coin.html#cb50-2"></a>print.coin &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb50-3"><a href="coin.html#cb50-3"></a>  <span class="kw">cat</span>(<span class="st">&#39;object &quot;coin&quot;</span><span class="ch">\n\n</span><span class="st">&#39;</span>)</span>
<span id="cb50-4"><a href="coin.html#cb50-4"></a>  cd &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb50-5"><a href="coin.html#cb50-5"></a>    <span class="dt">side =</span> x<span class="op">$</span>sides, <span class="dt">prob =</span> x<span class="op">$</span>prob</span>
<span id="cb50-6"><a href="coin.html#cb50-6"></a>  )</span>
<span id="cb50-7"><a href="coin.html#cb50-7"></a>  <span class="kw">print</span>(cd)</span>
<span id="cb50-8"><a href="coin.html#cb50-8"></a>  <span class="kw">invisible</span>(x)</span>
<span id="cb50-9"><a href="coin.html#cb50-9"></a>}</span></code></pre></div>
<p>The next time you print the name of an object of class <code>"coin"</code>, R will
look for a <code>print</code> method (which now exists) and dispatch such method.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="coin.html#cb51-1"></a>penny</span>
<span id="cb51-2"><a href="coin.html#cb51-2"></a><span class="co">#&gt; object &quot;coin&quot;</span></span>
<span id="cb51-3"><a href="coin.html#cb51-3"></a><span class="co">#&gt; </span></span>
<span id="cb51-4"><a href="coin.html#cb51-4"></a><span class="co">#&gt;      side prob</span></span>
<span id="cb51-5"><a href="coin.html#cb51-5"></a><span class="co">#&gt; 1 lincoln  0.5</span></span>
<span id="cb51-6"><a href="coin.html#cb51-6"></a><span class="co">#&gt; 2  shield  0.5</span></span></code></pre></div>
<p>If you look at the code of <code>print.coin()</code>, you’ll notice that I’ve decided to
use <code>cat()</code> to display a short text letting the user know that the printed
object is a <code>"coin"</code> object. Also, I’m assembling a data frame with the
<code>sides</code> and <code>prob</code> vectors so that their content looks nicely organized in a
tabular format when printed by R.</p>
</div>
<div id="extending-classes" class="section level2">
<h2><span class="header-section-number">3.7</span> Extending classes</h2>
<p>We can extend the class <code>"coin"</code> and create a derived class for special types
of coins. For instance, say we want to create a class <code>"quarter"</code>. One side of
the coin refers to George Washington, while the other side refers to the bald
eagle:</p>
<p><a href="https://en.wikipedia.org/wiki/Quarter_(United_States_coin)" class="uri">https://en.wikipedia.org/wiki/Quarter_(United_States_coin)</a></p>
<p>We can create a quarter by first starting with a <code>coin()</code> of <code>sides</code>
<em>washington</em> and <em>bald-eagle</em>, and then assign a <code>"quarter"</code> class:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="coin.html#cb52-1"></a>quarter1 &lt;-<span class="st"> </span><span class="kw">coin</span>(<span class="kw">c</span>(<span class="st">&quot;washington&quot;</span>, <span class="st">&quot;bald-eagle&quot;</span>)) </span>
<span id="cb52-2"><a href="coin.html#cb52-2"></a><span class="kw">class</span>(quarter1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;quarter&quot;</span>, <span class="st">&quot;coin&quot;</span>)</span>
<span id="cb52-3"><a href="coin.html#cb52-3"></a>quarter1</span>
<span id="cb52-4"><a href="coin.html#cb52-4"></a><span class="co">#&gt; object &quot;coin&quot;</span></span>
<span id="cb52-5"><a href="coin.html#cb52-5"></a><span class="co">#&gt; </span></span>
<span id="cb52-6"><a href="coin.html#cb52-6"></a><span class="co">#&gt;         side prob</span></span>
<span id="cb52-7"><a href="coin.html#cb52-7"></a><span class="co">#&gt; 1 washington  0.5</span></span>
<span id="cb52-8"><a href="coin.html#cb52-8"></a><span class="co">#&gt; 2 bald-eagle  0.5</span></span></code></pre></div>
<p>Interestingly, our coin <code>quarter1</code> inherits from <code>"coin"</code>:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="coin.html#cb53-1"></a><span class="kw">inherits</span>(quarter1, <span class="st">&quot;coin&quot;</span>)</span>
<span id="cb53-2"><a href="coin.html#cb53-2"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>In other words, <code>quartier1</code> is of class <code>"quarter"</code> but it is also a <code>"coin"</code>
object.</p>
<p>Likewise, we can create a class for a slightly unbalanced <code>"dime"</code>:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="coin.html#cb54-1"></a>dime1 &lt;-<span class="st"> </span><span class="kw">coin</span>(<span class="kw">c</span>(<span class="st">&quot;roosevelt&quot;</span>, <span class="st">&quot;torch&quot;</span>), <span class="dt">prob =</span> <span class="kw">c</span>(<span class="fl">0.48</span>, <span class="fl">0.52</span>))</span>
<span id="cb54-2"><a href="coin.html#cb54-2"></a><span class="kw">class</span>(dime1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;dime&quot;</span>, <span class="st">&quot;coin&quot;</span>)</span>
<span id="cb54-3"><a href="coin.html#cb54-3"></a>dime1</span>
<span id="cb54-4"><a href="coin.html#cb54-4"></a><span class="co">#&gt; object &quot;coin&quot;</span></span>
<span id="cb54-5"><a href="coin.html#cb54-5"></a><span class="co">#&gt; </span></span>
<span id="cb54-6"><a href="coin.html#cb54-6"></a><span class="co">#&gt;        side prob</span></span>
<span id="cb54-7"><a href="coin.html#cb54-7"></a><span class="co">#&gt; 1 roosevelt 0.48</span></span>
<span id="cb54-8"><a href="coin.html#cb54-8"></a><span class="co">#&gt; 2     torch 0.52</span></span></code></pre></div>
<p>Here’s another coin example with a <em>peso</em> from Mexico (where I grew up). When
you flip a <em>peso</em>, mexicans don’t really talk about about <em>cara</em> (heads) or
<em>cruz</em> (tail). Instead, they say <em>aguila</em> (eagle) or <em>sol</em> (sun):</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="coin.html#cb55-1"></a>peso &lt;-<span class="st"> </span><span class="kw">coin</span>(<span class="kw">c</span>(<span class="st">&quot;aguila&quot;</span>, <span class="st">&quot;sol&quot;</span>)) </span>
<span id="cb55-2"><a href="coin.html#cb55-2"></a><span class="kw">class</span>(peso) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;peso&quot;</span>, <span class="st">&quot;coin&quot;</span>)</span>
<span id="cb55-3"><a href="coin.html#cb55-3"></a>peso</span>
<span id="cb55-4"><a href="coin.html#cb55-4"></a><span class="co">#&gt; object &quot;coin&quot;</span></span>
<span id="cb55-5"><a href="coin.html#cb55-5"></a><span class="co">#&gt; </span></span>
<span id="cb55-6"><a href="coin.html#cb55-6"></a><span class="co">#&gt;     side prob</span></span>
<span id="cb55-7"><a href="coin.html#cb55-7"></a><span class="co">#&gt; 1 aguila  0.5</span></span>
<span id="cb55-8"><a href="coin.html#cb55-8"></a><span class="co">#&gt; 2    sol  0.5</span></span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="function.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="methods1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["packyourcode.pdf", "packyourcode.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
